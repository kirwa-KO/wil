import{L as W}from"./Layout.58f75559.js";import{r as s,m as w,l as C,u as L,a as S,j as i}from"./vendor.1f022085.js";import{A as T,L as $}from"./index.d96512d2.js";import{W as A}from"./WiliesCards.ca63bd20.js";import{u as E}from"./useHttp.14f3398b.js";import{a as H}from"./Heplers.3c671220.js";import"./Markdown.6a8a2488.js";import"./ErrorContainer.c41d753a.js";function B(){const n=s.exports.useContext(T),{isLoading:u,error:r,sendRequest:t}=E(),[d,o]=s.exports.useState([]),[p,l]=s.exports.useState([]),{username:c}=w(),m=C(),f=e=>{o(e.wilies)},g=e=>{l(H(e.tags))};s.exports.useEffect(()=>{t({url:`http://127.0.0.1:8080/feed/wilies/${c}`},f),t({url:"http://127.0.0.1:8080/feed/tags"},g)},[]);const h=e=>{a.show(e.message,{type:"sucess",timeout:3e3}),o(x=>x.filter(y=>y._id!==e.wily._id))},j=e=>{t({url:`http://127.0.0.1:8080/feed/wily/${e}`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.token}`},method:"DELETE"},h)},a=L();return r&&(a.show(r,{type:"error",timeout:5e3}),m.push("/")),S(W,{children:[u&&i($,{}),i(A,{deleteWilyHandler:j,wilies:d,suggestedTags:p})]})}export{B as default};
