var W=Object.defineProperty,M=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var j=(e,t,s)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,N=(e,t)=>{for(var s in t||(t={}))T.call(t,s)&&j(e,s,t[s]);if(C)for(var s of C(t))$.call(t,s)&&j(e,s,t[s]);return e},A=(e,t)=>M(e,H(t));import{L as O}from"./Layout.58f75559.js";import{r as a,a as v,j as r,c as R,u as E,L as Q}from"./vendor.1f022085.js";import{I as L,C as B,T as P}from"./InputPreviewMarkdown.96d28378.js";import{c as q,a as z}from"./Heplers.3c671220.js";import{W as F}from"./WiliesCards.ca63bd20.js";import{A as _,L as G}from"./index.d96512d2.js";import{u as V}from"./useHttp.14f3398b.js";import"./Markdown.6a8a2488.js";import"./ErrorContainer.c41d753a.js";let S=null;const y=Number("5"),Y=Number("256"),D=Number("512"),J={control:e=>A(N({},e),{boxShadow:e.boxShadow?"0 0 0 1px #1d1b84":void 0})},K=(e,t)=>e.length>0&&t.length<y,U=a.exports.forwardRef((e,t)=>{const[s,o]=a.exports.useState(),[d,l]=a.exports.useState(),[c,f]=a.exports.useState([]),[w,p]=a.exports.useState(!1),x=i=>{i.preventDefault();var m=q(c);e.addWilyHandler(s,d,!0,m)};a.exports.useImperativeHandle(t,()=>({resetInputs(){o(""),l(""),f([]),p(!1)}}));const b=i=>{p(!0),i.target.value==""&&p(!1),o(i.target.value)},I=i=>{l(i.target.value)},u=a.exports.useRef();return u&&u.current&&S===null&&(S=u.current.scrollHeight),v("form",{className:"main-inputs container bg-dark-darkmode",onSubmit:x,children:[r("label",{htmlFor:"",children:"Question"}),r(L,{onChangeInput:b,rows:"5",placeholder:"Question...",maxChars:Y,value:s}),v("div",{className:"answer",style:w?{height:S+"px",overflow:"visible"}:{height:"0px",overflow:"hidden"},ref:u,children:[r("label",{htmlFor:"",children:"Answer"}),r(L,{onChangeInput:I,rows:"10",placeholder:"Answer...",maxChars:D,value:d,className:"ml-0"}),r("div",{className:"position-relative",children:r(B,{isMulti:!0,onChange:f,options:c.length>=y?c:P.tags,styles:J,className:"react-select",classNamePrefix:"react-select-pre",placeholder:"coding, javascript, react, redux, ...",noOptionsMessage:()=>c.length===y?"You have reached the max tags":"No tags available",isValidNewOption:K})}),r("button",{className:"main-btn",children:"Add a wily"})]})]})});var X=R.memo(U);function ce(){const e=a.exports.useContext(_),{isLoading:t,error:s,sendRequest:o}=V(),[d,l]=a.exports.useState([]),[c,f]=a.exports.useState([]),w=n=>{l(n.wilies)},p=n=>{f(z(n.tags))},x=a.exports.useRef();a.exports.useEffect(()=>{e.isLoggedIn===!1?o({url:"http://127.0.0.1:8080/feed/wilies/public"},w):o({url:"http://127.0.0.1:8080/feed/wilies",headers:{Authorization:`Bearer ${e.token}`}},w),o({url:"http://127.0.0.1:8080/feed/tags"},p)},[]);const b=n=>{m.show(n.message,{type:"sucess",timeout:3e3}),l(h=>h.filter(g=>g._id!==n.wily._id))},I=a.exports.useMemo(()=>n=>{o({url:`http://127.0.0.1:8080/feed/wily/${n}`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},method:"DELETE"},b)},[]),u=n=>{x.current.resetInputs(),m.show(n.message,{type:"sucess",timeout:3e3}),l(h=>{var g=[...h,n.wily];return g})},i=a.exports.useMemo(()=>(n,h,g,k)=>{o({url:"http://127.0.0.1:8080/feed/wily",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},method:"POST",body:{question:n,answer:h,isPublic:g,tags:k}},u)},[]),m=E();return s&&m.show(s,{type:"error",timeout:5e3}),v(O,{children:[t&&r(G,{}),!e.isLoggedIn&&r("div",{className:"content-container",children:v("div",{className:"container content bg-dark-darkmode",children:[r("h4",{className:"text-center",children:"How to use Wil :"}),r("p",{className:"text-center",children:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Blanditiis minima reprehenderit nisi eligendi. Maxime explicabo, iusto est ipsum error autem libero distinctio deleniti, vero accusamus soluta. Est blanditiis mollitia non!"}),r("div",{className:"text-center",children:r(Q,{to:"/docs",children:"Show more how wil work ?"})})]})}),e.isLoggedIn&&r(X,{ref:x,addWilyHandler:i}),d.length>0&&r(F,{deleteWilyHandler:I,wilies:d,suggestedTags:c})]})}export{ce as default};
