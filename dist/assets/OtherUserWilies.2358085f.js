import{L as x}from"./Layout.7fe6aeda.js";import{W}from"./WiliesCards.28b82713.js";import{r as s,k as b,e as C,u as L,a as S,j as i}from"./vendor.b5e3c5d1.js";import{A as T,L as $}from"./index.e1ae2df7.js";import{u as A}from"./useHttp.d84abd54.js";import{a as E}from"./Heplers.eaad7371.js";import"./MarkdownPreview.0f785546.js";import"./style.938310fd.js";import"./ErrorContainer.bc02799b.js";function B(){const n=s.exports.useContext(T),{isLoading:u,error:r,sendRequest:t}=A(),[d,o]=s.exports.useState([]),[p,c]=s.exports.useState([]),{username:l}=b(),m=C(),f=e=>{o(e.wilies)},w=e=>{c(E(e.tags))};s.exports.useEffect(()=>{t({url:`https://www.scraspy.com/feed/wilies/${l}`},f),t({url:"https://www.scraspy.com/feed/tags"},w)},[]);const g=e=>{a.show(e.message,{type:"sucess",timeout:3e3}),o(j=>j.filter(y=>y._id!==e.wily._id))},h=e=>{t({url:`https://www.scraspy.com/feed/wily/${e}`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.token}`},method:"DELETE"},g)},a=L();return r&&(a.show(r,{type:"error",timeout:5e3}),m.push("/")),S(x,{children:[u&&i($,{}),i(W,{deleteWilyHandler:h,wilies:d,suggestedTags:p})]})}export{B as default};
