import{L as w}from"./Layout.58f75559.js";import{j as e,a as o,L as g,r as l,m as v,u as b,l as N}from"./vendor.1f022085.js";import{A as j,L as x}from"./index.d96512d2.js";import{M as c}from"./Markdown.6a8a2488.js";import{g as W,E as C}from"./ErrorContainer.c41d753a.js";import{u as L}from"./useHttp.14f3398b.js";function k(r){var{wily:t}=r;const n=a=>{confirm("Are you sure to delete the wily ??")&&r.deleteWilyHandler(a)};return e("div",{className:"wil-content-container",children:o("div",{className:"container wil-content wily-container",children:[o("span",{className:"date-label",children:[t.creator&&t.creator.username," \u2022"," ",W(t.updatedAt)]}),e("div",{className:"qst-container",children:e(c,{value:t.question})}),e("div",{className:"tags-container",children:t.tags&&t.tags.map((a,i)=>e("span",{className:"tag",children:a.name},i))}),e("hr",{}),e("div",{className:"answer-container",children:e(c,{value:t.answer})}),t.creator&&r.authenticatedUsername===t.creator.username&&e("div",{className:"btns-container",children:o("div",{className:"control-btns",children:[e(g,{to:`/edit/wil/${t._id}`,children:e("button",{className:"brdr-2-dark edit-btn",children:"edit"})}),e("button",{className:"brdr-2-dark delete-btn",onClick:n.bind(null,t._id),children:"delete"})]})})]})})}function M(){const r=l.exports.useContext(j),{wilId:t}=v(),{isLoading:n,error:a,sendRequest:i}=L(),[u,m]=l.exports.useState({}),d=b(),h=N(),y=s=>{m(s.wily)};l.exports.useEffect(()=>{i({url:`http://127.0.0.1:8080/feed/wily/${t}`,headers:{Authorization:`Bearer ${r.token}`}},y)},[]);const p=s=>{d.show(s.message,{type:"sucess",timeout:3e3}),h.push("/")},f=s=>{i({url:`http://127.0.0.1:8080/feed/wily/${s}`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.token}`},method:"DELETE"},p)};return a&&d.show(a,{type:"error",timeout:5e3}),o(w,{children:[a&&e(C,{errorMessage:a}),!a&&n&&e(x,{}),!a&&!n&&e(k,{authenticatedUsername:r.username,wily:u,deleteWilyHandler:f})]})}export{M as default};
