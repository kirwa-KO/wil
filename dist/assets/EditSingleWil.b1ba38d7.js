var S=Object.defineProperty,A=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var f=(t,e,s)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,C=(t,e)=>{for(var s in e||(e={}))k.call(e,s)&&f(t,s,e[s]);if(x)for(var s of x(e))$.call(e,s)&&f(t,s,e[s]);return t},j=(t,e)=>A(t,I(e));import{L as E}from"./Layout.7fe6aeda.js";import{r as i,j as a,a as c,k as W,u as O,e as q}from"./vendor.b5e3c5d1.js";import{A as H,L as P}from"./index.e1ae2df7.js";import{g as L,E as T}from"./ErrorContainer.bc02799b.js";import{I as N,C as M,R as Q,a as R}from"./publicIcon.dbc84db8.js";import{a as F,c as _}from"./Heplers.eaad7371.js";import{u as z}from"./useHttp.d84abd54.js";import"./MarkdownEditor.007a4d24.js";import"./style.938310fd.js";const B=[{_id:"0",qst:'what this statement \n```python\nprint("this is kirwa speaking")\n```\n will print something \n\n ster akhor',answer:'what this statement    \n```python\nprint("this is kirwa speaking")\n```\n will print',date:"2022-01-29T14:00:52.973Z",tags:["python","coding"]}],D=[{value:"javascript",label:"javascript"},{value:"react",label:"react"},{value:"redux",label:"redux"},{value:"coding",label:"coding"},{value:"node",label:"node"},{value:"express",label:"express"},{value:"mongodb",label:"mongodb"},{value:"mysql",label:"mysql"},{value:"mongoose",label:"mongoose"}];var G={data:B,tags:D};const v=Number("5"),U=Number("256"),V=Number("512"),Y={control:t=>j(C({},t),{boxShadow:t.boxShadow?"0 0 0 1px #1d1b84":void 0})},Z=(t,e)=>t.length>0&&e.length<v;function J(t){var{wily:e}=t,s=e.tags?F(e.tags):null;const[n,u]=i.exports.useState(e.question),[p,h]=i.exports.useState(e.answer),[r,g]=i.exports.useState(s),[d,m]=i.exports.useState(e.isPublic),b=o=>{u(o.target.value)},l=o=>{h(o.target.value)};return a("div",{className:"edit-container",children:a("div",{className:"container",children:c("form",{className:"main-inputs bg-dark-darkmode mb-4",onSubmit:o=>{o.preventDefault();var w=_(r);t.onEditWily(n,p,d,w)},children:[c("div",{className:"date-label",children:[e.creator&&e.creator.username," \u2022"," ",L(e.updatedAt)]}),a("label",{htmlFor:"",children:"Question"}),a(N,{onChangeInput:b,rows:"8",placeholder:"Question...",maxChars:U,value:n}),a("label",{htmlFor:"",children:"Answer"}),a(N,{onChangeInput:l,rows:"10",placeholder:"Answer...",maxChars:V,value:p}),c("div",{className:"position-relative w-100",children:[a(M,{isMulti:!0,onChange:g,value:r,options:s&&r.length>=v?r:G.tags,styles:Y,className:"react-select",classNamePrefix:"react-select-pre",placeholder:"coding, javascript, react, redux, ...",noOptionsMessage:()=>r.length===v?"You have reached the max tags":"No tags available",isValidNewOption:Z}),c("div",{className:"row mx-0 mb-3",children:[c("div",{className:`wil-status col-2 ${d?"selected":""}`,onClick:o=>m(!0),children:[a("span",{children:"public"}),a(Q,{})]}),c("div",{className:`wil-status col-2 ${d?"":"selected"}`,onClick:o=>m(!1),children:[a("span",{children:"private"}),a(R,{})]}),a("div",{className:"col-8 d-flex justify-content-end px-0",children:a("button",{className:"main-btn",children:"Add a wily"})})]})]})]})})})}function ie(){const t=i.exports.useContext(H),{wilId:e}=W(),{isLoading:s,error:n,sendRequest:u}=z(),[p,h]=i.exports.useState({}),r=O(),g=q(),d=l=>{h(l.wily)};i.exports.useEffect(()=>{u({url:`https://www.scraspy.com/feed/wily/${e}`,headers:{Authorization:`Bearer ${t.token}`}},d)},[]);const m=l=>{r.show(l.message,{type:"sucess",timeout:3e3}),g.push(`/wil/${e}`)},b=(l,y,o,w)=>{u({url:`https://www.scraspy.com/feed/wily/${e}`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.token}`},method:"PUT",body:{question:l,answer:y,isPublic:o,tags:w}},m)};return n&&r.show(n,{type:"error",timeout:5e3}),c(E,{children:[n&&a(T,{errorMessage:n}),!n&&s&&a(P,{}),!n&&!s&&a(J,{wily:p,onEditWily:b})]})}export{ie as default};
