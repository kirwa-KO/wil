import{L as W}from"./Layout.1e1f6178.js";import{r as s,m as w,l as C,u as L,a as S,j as i}from"./vendor.5be3ed47.js";import{A as T,L as $}from"./index.2fc84c23.js";import{W as b}from"./WiliesCards.42b5cc15.js";import{u as A}from"./useHttp.aa02af8e.js";import{a as E}from"./Heplers.f3e66dae.js";import"./Markdown.43c1fea1.js";import"./ErrorContainer.b0c5883e.js";function B(){const n=s.exports.useContext(T),{isLoading:u,error:r,sendRequest:t}=A(),[c,o]=s.exports.useState([]),[p,d]=s.exports.useState([]),{username:l}=w(),m=C(),f=e=>{o(e.wilies)},g=e=>{d(E(e.tags))};s.exports.useEffect(()=>{t({url:`http://127.0.0.1:8080/feed/wilies/${l}`},f),t({url:"http://127.0.0.1:8080/feed/tags"},g)},[]);const h=e=>{a.show(e.message,{type:"sucess",timeout:3e3}),o(x=>x.filter(y=>y._id!==e.wily._id))},j=e=>{t({url:`http://127.0.0.1:8080/feed/wily/${e}`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.token}`},method:"DELETE"},h)},a=L();return r&&(a.show(r,{type:"error",timeout:5e3}),m.push("/")),S(W,{children:[u&&i($,{}),i(b,{deleteWilyHandler:j,wilies:c,suggestedTags:p})]})}export{B as default};
