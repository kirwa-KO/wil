import{L as f}from"./Layout.7fe6aeda.js";import{j as e,a as o,L as b,r as l,k as v,u as g,e as j}from"./vendor.b5e3c5d1.js";import{A as N,L as x}from"./index.e1ae2df7.js";import{M as c}from"./MarkdownPreview.0f785546.js";import{g as W,E as k}from"./ErrorContainer.bc02799b.js";import{u as C}from"./useHttp.d84abd54.js";import"./style.938310fd.js";function L(a){var{wily:t}=a;const n=s=>{confirm("Are you sure to delete the wily ??")&&a.deleteWilyHandler(s)};return e("div",{className:"wil-content-container",children:o("div",{className:"container wil-content wily-container",children:[o("span",{className:"date-label",children:[t.creator&&t.creator.username," \u2022"," ",W(t.updatedAt)]}),e("div",{className:"qst-container",children:e(c,{value:t.question})}),e("div",{className:"tags-container",children:t.tags&&t.tags.map((s,i)=>e("span",{className:"tag",children:s.name},i))}),e("hr",{}),e("div",{className:"answer-container",children:e(c,{value:t.answer})}),t.creator&&a.authenticatedUsername===t.creator.username&&e("div",{className:"btns-container",children:o("div",{className:"control-btns",children:[e(b,{to:`/edit/wil/${t._id}`,children:e("button",{className:"brdr-2-dark edit-btn",children:"edit"})}),e("button",{className:"brdr-2-dark delete-btn",onClick:n.bind(null,t._id),children:"delete"})]})})]})})}function D(){const a=l.exports.useContext(N),{wilId:t}=v(),{isLoading:n,error:s,sendRequest:i}=C(),[u,m]=l.exports.useState({}),d=g(),h=j(),w=r=>{m(r.wily)};l.exports.useEffect(()=>{i({url:`https://www.scraspy.com/feed/wily/${t}`,headers:{Authorization:`Bearer ${a.token}`}},w)},[]);const y=r=>{d.show(r.message,{type:"sucess",timeout:3e3}),h.push("/")},p=r=>{i({url:`https://www.scraspy.com/feed/wily/${r}`,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.token}`},method:"DELETE"},y)};return s&&d.show(s,{type:"error",timeout:5e3}),o(f,{children:[s&&e(k,{errorMessage:s}),!s&&n&&e(x,{}),!s&&!n&&e(L,{authenticatedUsername:a.username,wily:u,deleteWilyHandler:p})]})}export{D as default};
